<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>LeetCode - 11-Container With Most Water | W41ter’s Bistro</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="LeetCode - 11-Container With Most Water" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="problem Container With Most Water" />
<meta property="og:description" content="problem Container With Most Water" />
<link rel="canonical" href="/leetcode/2017/03/07/LeetCode-11-Container-With-Most-Water.html" />
<meta property="og:url" content="/leetcode/2017/03/07/LeetCode-11-Container-With-Most-Water.html" />
<meta property="og:site_name" content="W41ter’s Bistro" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-03-07T20:41:38+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="LeetCode - 11-Container With Most Water" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2017-03-07T20:41:38+08:00","datePublished":"2017-03-07T20:41:38+08:00","description":"problem Container With Most Water","headline":"LeetCode - 11-Container With Most Water","mainEntityOfPage":{"@type":"WebPage","@id":"/leetcode/2017/03/07/LeetCode-11-Container-With-Most-Water.html"},"url":"/leetcode/2017/03/07/LeetCode-11-Container-With-Most-Water.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="W41ter's Bistro" /><!-- for mathjax support -->
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">W41ter&#39;s Bistro</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">LeetCode - 11-Container With Most Water</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2017-03-07T20:41:38+08:00" itemprop="datePublished">Mar 7, 2017
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="problem">problem</h1>

<p><a href="https://leetcode.com/problems/container-with-most-water/?tab=Description">Container With Most Water</a></p>

<!-- more -->

<h1 id="solution">solution</h1>

<p>这道题目直观的解法是每对线都比较一次，直到最大的：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Solution {
public:
    int maxArea(vector&lt;int&gt;&amp; height) {
        int m = 0;
        for (int i = 0; i &lt; height.size()-1; ++i) {
            for (int j = 1; j &lt; height.size(); ++j) {
                int value = (j-i) * min(height[i], height[j]);
                if (value &gt; m)
                    m = value;
            }
        }
        return m;
    }
    
    int min(int l, int r) {
        return l &lt; r ? l : r;
    }
};
</code></pre></div></div>

<p>这样效率肯定不够高，会超时。</p>

<p>我们换一个角度来看，容积取决于最短的线。那么容积中最短的线，其与最远距离的乘积为容量。重复此操作就可以找到最大容积。所以问题就变成了求 a 到左边和右边最远的&gt;= a的点的距离。这个仍然不好求，换个角度来看，就是求a点出发，所有小于等于a的点的最大值。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Solution {
public:
    struct Point {
        int idx;
        int height;
        bool operator &lt; (const Point &amp;rhs) const {
            return height &gt; rhs.height || (height == rhs.height &amp;&amp; idx &gt; rhs.idx);
        }
    };
    
    void fill(priority_queue&lt;Point&gt; &amp;queue, const vector&lt;int&gt; &amp;height) {
        for (size_t i = 0; i &lt; height.size(); ++i) {
            queue.push(Point{i, height[i]});
        }
    }
    
    int maxArea(vector&lt;int&gt;&amp; height) {
        priority_queue&lt;Point&gt; left;
        fill(left, height);
        
        priority_queue&lt;Point&gt; right = left;
        
        int size = height.size(), result = 0;
        for (int i = 0; i &lt; size - 1; ++i) {
            while (!left.empty()) {
                Point point = left.top();
                if (point.height &gt; height[i])
                    break;
                left.pop();
                result = max(result, (point.idx - i) * point.height);
            }
        }
        for (int i = size - 1; i &gt; 0; --i) {
            while (!right.empty()) {
                Point point = right.top();
                if (point.height &gt; height[i])
                    break;
                right.pop();
                result = max(result, (i - point.idx) * point.height);
            }
        }
        return result;
    }
};
</code></pre></div></div>

<p>这样的算法肯定能够通过测试了。但是仍然不够快，为什么？因为我们这种办法求出了所有的点能组成的最大值，然而题目中只要求最大的。现在考虑一种情况，如果比a小的且离a最远的旁边还有值，那么意味着所有针对a的计算全是白费的（想想为什么）。</p>

<p>根据刚才的启示，在 a 和 b 的中间，除非有两个大于 a 和 b 的值，否则 a 与 b 最大（想想为什么）。不过话说回来，这么简单的思路为什么一开始想不到呢？</p>

<h1 id="code">code</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Solution {
public:
    int maxArea(vector&lt;int&gt;&amp; height) {
        int water = 0;
        int i = 0, j = height.size() - 1;
        while (i &lt; j) {
            int h = min(height[i], height[j]);
            water = max(water, (j - i) * h);
            while (height[i] &lt;= h &amp;&amp; i &lt; j) i++;
            while (height[j] &lt;= h &amp;&amp; i &lt; j) j--;
        }
        return water;
    }
}
</code></pre></div></div>

  </div><a class="u-url" href="/leetcode/2017/03/07/LeetCode-11-Container-With-Most-Water.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">W41ter&#39;s Bistro</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">W41ter&#39;s Bistro</li><li><a class="u-email" href="mailto:w41ter.l@gmail.com">w41ter.l@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/w41ter"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">w41ter</span></a></li><li><a href="https://www.twitter.com/WalterM56697798"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">WalterM56697798</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Focus on distributed storage system, compiler.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
